# 35 Post Exploitation Fundamentals

# Meterpreter Fundamentals

## Post Exploitation

**Penetration Testing Phases**
1. Information Gathering
2. Enumeration
3. Exploitation
4. Post Exploitation
	- Privilege Escalation
	- Maintaining Persistent Access
	- Clearing Tracks

- Post exploitation refers to the actions performed on the target system after initial access has been obtained
- The post exploitation phase of a penetration test consists of various techniques like:
	- Local Enumeration
	- Privilege Escalation
	- Dumping Hashes
	- Establishing Persistence
	- Clearing Your Tracks
	- Pivoting

## Meterpreter

- The Meterpreter (Meta-Interpreter) payload is an advanced multi-functional payload that operates via DLL injection and is executed in memory on the target system, consequently making it difficult to detect
- It communicates over a stager socket and provides an attacker with an interactive command interpreter on the target system that facilitates the execution of system commands, file system navigation, keylogging and much more
- Meterpreter also allows us to load custom script and plugins dynamically
- MSF provides us with various types of meterpreter payloads that can be used based on the target environment and the OS architecture

### DEMO

```shell
meterpreter: sysinfo
meterpreter: getuid # Which user I am
meterpreter: help
meterpreter: background # Or CRTL + Z
meterpreter: getenv PATH # Environment Variables
meterpreter: search # -f files, -d directories
meterpreter: download
meterpreter: shell # Of the target system
meterpreter: ps # Process on the target system
meterpreter: migrate # Migrate to another process on the target system, use PID or name
meterpreter: execute # Execute command on the target system
msf6: sessions -h
msf6: sessions -C sysinfo -i <ID> # Send command without enter in meterpreter
msf6: sessions -n # Provide a name to a session
```

# Upgrading Command Shell to Meterpreter Shells

### DEMO

```shell
msf6: post(multi/manage/shell_to_meterpreter)
msf6: sessions -u <ID> # Upgrade a shell to a meterpreter on many platforms
```

#eJPT #cybersecurity 